!function(a,b){"function"==typeof define&&define.amd?define(["exports"],function(c){return a.Publisher=b(a,c),a.Publisher}):"undefined"!=typeof exports?b(a,exports):a.Publisher=b(a,{})}(this,function(a,b){return b=function(a){var b,c,d,e,f,g,h,i;i=this,i.prototype={},c={},b={},d=function(a){return"function"==typeof a},g=function(a){var c,d;return c=a,d={route:function(){var a,d,e,f,g,h;for(e={},h=b[c],a=f=0,g=h.length;g>f;a=++f)d=h[a],void 0!==d&&(0===a?e=d.apply(i,arguments):d.apply(i));return e}}};for(e in a)h=a[e],d(h)?(f=new g(e),i[e]=f.route,b[e]=[h]):i[e]=h;return i.constructor.prototype.attachTo=function(a,c,d){void 0===arguments[2]&&(d=b[a].length++),void 0===b[a][d]||null===b[a][d]?b[a][d]=c:Array.prototype.splice.call(b[a],d,0,c)},i.constructor.prototype.on=function(a,b){c[a]=b},i.constructor.prototype.trigger=function(a,b,d){var e;return e={},"string"==typeof a?(d=b,b=a,a=i,e="array"==typeof d?c[b].apply(a,d):c[b].call(a,d)):e=3===arguments.length?"array"==typeof d?c[b].apply(a,d):c[b].call(a,d):c,e},i.constructor.prototype.off=function(a){var b;return b=!1,Object.keys(c).indexOf(a>-1)&&(b=delete c[a]),b},i}});