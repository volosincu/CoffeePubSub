!function(a,b){"function"==typeof define&&define.amd?define(["exports"],function(c){return a.Publisher=b(a,c),a.Publisher}):"undefined"!=typeof exports?b(a,exports):a.Publisher=b(a,{})}(this,function(a,b){return b=function(a){var b,c,d,e,f,g,h,i;b=Object.create(this),d={},c={},e=function(a){return"function"==typeof a},h=function(a){var d,e;return d=a,e={route:function(){var a,e,f,g,h,i;for(i={},h=c[d],a=e=0,g=h.length;g>e;a=++e)f=h[a],void 0!==f&&(0===a?i=f.apply(b,arguments):f.apply(b));return i}}};for(f in a)i=a[f],e(i)?(g=new h(f),b[f]=g.route,c[f]=[i]):b[f]=i;return b.__proto__.attachTo=function(a,b,d){void 0===arguments[2]&&(d=c[a].length++),void 0===c[a][d]||null===c[a][d]?c[a][d]=b:Array.prototype.splice.call(c[a],d,0,b)},b.__proto__.on=function(a,b){d[a]=b},b.__proto__.trigger=function(a,c,e){var f;return f={},"string"==typeof a?(e=c,c=a,a=b,f="array"==typeof e?d[c].apply(a,e):d[c].call(a,e)):f=3===arguments.length?"array"==typeof e?d[c].apply(a,e):d[c].call(a,e):d,f},b.__proto__.off=function(a){var b;return b=!1,Object.keys(d).indexOf(a)>-1&&(b=delete d[a]),b},b}});